import{_ as k,e as _,T as I,M as R,K as S,L as T,f as m,G as A,v as C,h as E,U,z as q,o as P,b as z,d as t,t as D,g as l,w as b,C as O,A as j,I as y,E as F,q as G,u as K,r as c}from"./index.de0ca9a4.js";import M from"./ContainerLayout.b5848501.js";import{T as V}from"./Translations.1218f135.js";import"./lodash.c1954877.js";const $=_({name:"UserAccountLogin",components:{UserAccountContainerLayout:M,Promotion:I,Translations:V},setup(){const{proxy:a}=j(),d=R(),p=S(),v=T(),n=m(!0),i=m(""),o=m(""),u=A({email:"vite.admin@gmail.com",password:"123456"}),e=C(),g=E(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:n.value,size:"large"},text:e.t("login.signin"),on:{click(r){a.onSubmit(r)}}}],formConfig:[{attrs:{prop:"email",error:i.value,rules:()=>[a.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:o.value,rules:()=>a.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function s(r=!1){n.value=r}return s(!0),U(()=>{q(()=>{s(!1)})}),{isLoading:n,inputErrorEmail:i,inputErrorPassword:o,formData:u,configLogin:g,setLoading:s,onSubmit:function(r){n.value||r.validate(async h=>{if(!h)return;i.value="",o.value="",s(!0);const{error:L,data:f,msg:x}=await d.login(u);if(L)return i.value=" ",o.value=x,void s(!1);y.set("token",f.user.token),y.set("name",f.user.username),v.replace(`/${p.params.locale||""}`).then(()=>{F.success({type:"success",message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}}}}),w=a=>(G("data-v-fcdb7480"),a=a(),K(),a),B={class:"user-account-login"},H={class:"user-account-nav"},J={class:"nav-left"},N=w(()=>t("div",{class:"nav-logo"},null,-1)),Q=w(()=>t("div",{class:"nav-circle"},null,-1)),W={class:"nav-title"},X={class:"nav-right"},Y={class:"user-account-body"};var ta=k($,[["render",function(a,d,p,v,n,i){const o=c("Translations"),u=c("Promotion"),e=c("el-icon"),g=c("UserAccountContainerLayout"),s=c("Footer");return P(),z("div",B,[t("div",H,[t("div",J,[N,Q,t("div",W,D(a._t("base.systemTitle")),1)]),t("div",X,[l(o)])]),t("div",Y,[l(g,O(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:b(()=>[l(e,null,{default:b(()=>[l(u)]),_:1})]),_:1},16,["form-data","onOnSubmit"])]),l(s)])}],["__scopeId","data-v-fcdb7480"]]);export{ta as default};
