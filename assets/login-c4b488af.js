import{R as k}from"./index-207f543d.js";import L from"./ContainerLayout-00113ace.js";import{T as x}from"./Translations-74ab3a37.js";import{u as C,b as R,a as v}from"./request-e8bb67ec.js";import{u as A}from"./index-38f03f1f.js";import{ai as T,x as P,r as m,V as E,e as U,o as $,S as V,y as B,z as D,A as s,O,P as c,I as h,T as j,a7 as l,ak as q,al as z,g as F}from"./_plugin-vue_export-helper-cb68d2ee.js";import{u as M}from"./index-0a92b230.js";import{a3 as N}from"./index-90826cda.js";import"./runtime-dom.esm-bundler-7fe9d643.js";import"./lodash-e9f1b42e.js";import"./_commonjsHelpers-725317a4.js";import"./type-0f39189c.js";import"./pinia-545f2afc.js";import"./index-a1ed4fe9.js";const G=P({name:"UserAccountLogin",components:{UserAccountContainerLayout:L,Promotion:k,Translations:x},setup(){const{proxy:o}=F(),d=A(),g=C(),f=R(),a=m(!0),r=m(""),n=m(""),u=E({email:"vite.admin@gmail.com",password:"123456"}),e=M(),p=U(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:a.value,size:"large"},text:e.t("login.signin"),on:{click(i){o.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:r.value,rules(){return[o.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),o.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]}},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:n.value,rules(){return o.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})}},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function t(i=!1){a.value=i}function w(i){a.value||i.validate(async S=>{if(!S)return;r.value="",n.value="",t(!0);const{error:b,data:_,msg:I}=await d.login(u);if(b){r.value=" ",n.value=I,t(!1);return}v.set("token",_.user.token),v.set("name",_.user.username),f.replace(`/${g.params.locale||""}`).then(()=>{N.success({type:"success",message:"登录成功"})}).catch(()=>{})})}return t(!0),$(()=>{V(()=>{t(!1)})}),{isLoading:a,inputErrorEmail:r,inputErrorPassword:n,formData:u,configLogin:p,setLoading:t,onSubmit:w}}}),y=o=>(q("data-v-d5afcf6f"),o=o(),z(),o),H={class:"user-account-login"},J={class:"user-account-nav"},K={class:"nav-left"},Q=y(()=>s("div",{class:"nav-logo"},null,-1)),W=y(()=>s("div",{class:"nav-circle"},null,-1)),X={class:"nav-title"},Y={class:"nav-right"},Z={class:"user-account-body"};function oo(o,d,g,f,a,r){const n=l("Translations"),u=l("Promotion"),e=l("el-icon"),p=l("UserAccountContainerLayout"),t=l("Footer");return B(),D("div",H,[s("div",J,[s("div",K,[Q,W,s("div",X,O(o._t("base.systemTitle")),1)]),s("div",Y,[c(n)])]),s("div",Z,[c(p,j(o.configLogin,{"form-data":o.formData,onOnSubmit:o.onSubmit}),{titleIcon:h(()=>[c(e,null,{default:h(()=>[c(u)]),_:1})]),_:1},16,["form-data","onOnSubmit"])]),c(t)])}const _o=T(G,[["render",oo],["__scopeId","data-v-d5afcf6f"]]);export{_o as default};
