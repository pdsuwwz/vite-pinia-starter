import{_ as C,e as L,o as I,b as S,d as s,t as x,g as c,w as v,m as R,G as A,H as E,D as T,I as P,h as d,q as U,u as $,f as D,J as q,n as B,r as u,K as y,E as V,k as j}from"./index-CZ3M5xce.js";import F from"./ContainerLayout-VzRlfRrR.js";import{T as M}from"./Translations-ha1qOBMM.js";import"./lodash-DF97ZpTy.js";const N=L({name:"UserAccountLogin",components:{UserAccountContainerLayout:F,Promotion:A,Translations:M},setup(){const{proxy:o}=j(),n=E(),g=T(),f=P(),r=d(!0),i=d(""),a=d(""),m=U({email:"vite.admin@gmail.com",password:"123456"}),e=$(),p=D(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:r.value,size:"large"},text:e.t("login.signin"),on:{click(l){o.onSubmit(l)}}}],formConfig:[{attrs:{prop:"email",error:i.value,rules(){return[o.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),o.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]}},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:a.value,rules(){return o.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})}},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function t(l=!1){r.value=l}function h(l){r.value||l.validate(async w=>{if(!w)return;i.value="",a.value="",t(!0);const{error:b,data:_,msg:k}=await n.login(m);if(b){i.value=" ",a.value=k,t(!1);return}y.set("token",_.user.token),y.set("name",_.user.username),f.replace(`/${g.params.locale||""}`).then(()=>{V.success({type:"success",message:"登录成功"})}).catch(()=>{})})}return t(!0),q(()=>{B(()=>{t(!1)})}),{isLoading:r,inputErrorEmail:i,inputErrorPassword:a,formData:m,configLogin:p,setLoading:t,onSubmit:h}}}),O={class:"user-account-login"},z={class:"user-account-nav"},G={class:"nav-left"},H={class:"nav-title"},J={class:"nav-right"},K={class:"user-account-body"};function Q(o,n,g,f,r,i){const a=u("Translations"),m=u("Promotion"),e=u("el-icon"),p=u("UserAccountContainerLayout"),t=u("CustomFooter");return I(),S("div",O,[s("div",z,[s("div",G,[n[0]||(n[0]=s("div",{class:"nav-logo"},null,-1)),n[1]||(n[1]=s("div",{class:"nav-circle"},null,-1)),s("div",H,x(o._t("base.systemTitle")),1)]),s("div",J,[c(a)])]),s("div",K,[c(p,R(o.configLogin,{"form-data":o.formData,onOnSubmit:o.onSubmit}),{titleIcon:v(()=>[c(e,null,{default:v(()=>[c(m)]),_:1})]),_:1},16,["form-data","onOnSubmit"])]),c(t)])}const ee=C(N,[["render",Q],["__scopeId","data-v-8ffea1e4"]]);export{ee as default};
