import{_ as x,e as _,r as l,o as I,b as R,d as t,t as S,f as c,w as y,C as T,T as A,M as C,K as E,L as U,g as m,G as q,v as P,h as z,U as D,z as O,I as b,E as j,q as F,u as G,A as K}from"./index.a68102d9.js";import M from"./ContainerLayout.486f08a2.js";import{T as V}from"./Translations.39dfe8db.js";import"./lodash.5d42dc8c.js";const $=_({name:"UserAccountLogin",components:{UserAccountContainerLayout:M,Promotion:A,Translations:V},setup(){const{proxy:a}=K(),d=C(),p=E(),f=U(),n=m(!0),i=m(""),o=m(""),u=q({email:"vite.admin@gmail.com",password:"123456"}),s=P(),g=z(()=>({title:s.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:n.value,size:"large"},text:s.t("login.signin"),on:{click(r){a.onSubmit(r)}}}],formConfig:[{attrs:{prop:"email",error:i.value,rules:()=>[a.getRequiredRules({trigger:"change",message:s.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:s.t("login.plscurrentemail")})]},label:s.t("login.email"),prefixIcon:"user-tie",placeholder:s.t("login.plsemail")},{attrs:{prop:"password",error:o.value,rules:()=>a.getRequiredRules({trigger:"change",message:s.t("login.plspwd")})},link:{text:s.t("login.fgtpwd"),click(){}},type:"password",label:s.t("login.pwd"),prefixIcon:"lock",placeholder:s.t("login.plspwd")}]}));function e(r=!1){n.value=r}return e(!0),D(()=>{O(()=>{e(!1)})}),{isLoading:n,inputErrorEmail:i,inputErrorPassword:o,formData:u,configLogin:g,setLoading:e,onSubmit:function(r){n.value||r.validate(async h=>{if(!h)return;i.value="",o.value="",e(!0);const{error:L,data:v,msg:k}=await d.login(u);if(L)return i.value=" ",o.value=k,void e(!1);b.set("token",v.user.token),b.set("name",v.user.username),f.replace(`/${p.params.locale||""}`).then(()=>{j.success({type:"success",message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}}}}),w=a=>(F("data-v-d5afcf6f"),a=a(),G(),a),B={class:"user-account-login"},H={class:"user-account-nav"},J={class:"nav-left"},N=w(()=>t("div",{class:"nav-logo"},null,-1)),Q=w(()=>t("div",{class:"nav-circle"},null,-1)),W={class:"nav-title"},X={class:"nav-right"},Y={class:"user-account-body"},ta=x($,[["render",function(a,d,p,f,n,i){const o=l("Translations"),u=l("Promotion"),s=l("el-icon"),g=l("UserAccountContainerLayout"),e=l("Footer");return I(),R("div",B,[t("div",H,[t("div",J,[N,Q,t("div",W,S(a._t("base.systemTitle")),1)]),t("div",X,[c(o)])]),t("div",Y,[c(g,T(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:y(()=>[c(s,null,{default:y(()=>[c(u)]),_:1})]),_:1},16,["form-data","onOnSubmit"])]),c(e)])}],["__scopeId","data-v-d5afcf6f"]]);export{ta as default};
